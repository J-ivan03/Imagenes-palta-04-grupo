<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Lalangui Peña, Ortiz Zavaleta, Torres Salaza, Coronel Balcazar, Maicelo Villanueva, santillan Gil">

<title>Label Studio como Plataforma de Etiquetado para el Análisis Automático de Hojas de Palta mediante Aprendizaje Automático</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="index_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap-813c323200a87c37e262811031999de4.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<style>html{ scroll-behavior: smooth; }</style>
<style>

      .quarto-title-block .quarto-title-banner {
        background-image: url(untrm.png);
background-size: cover;
      }
</style>


<link rel="stylesheet" href="styles.css">
</head>

<body class="quarto-light">

<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Label Studio como Plataforma de Etiquetado para el Análisis Automático de Hojas de Palta mediante Aprendizaje Automático</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Lalangui Peña, Ortiz Zavaleta, Torres Salaza, Coronel Balcazar, Maicelo Villanueva, santillan Gil </p>
            </div>
    </div>
      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introducción" id="toc-introducción" class="nav-link active" data-scroll-target="#introducción"><span class="header-section-number">1</span> INTRODUCCIÓN</a></li>
  <li><a href="#objetivos" id="toc-objetivos" class="nav-link" data-scroll-target="#objetivos"><span class="header-section-number">2</span> OBJETIVOS</a>
  <ul class="collapse">
  <li><a href="#o.-obejtivo-general" id="toc-o.-obejtivo-general" class="nav-link" data-scroll-target="#o.-obejtivo-general"><span class="header-section-number">2.1</span> O. OBEJTIVO GENERAL</a></li>
  <li><a href="#o.-objetivo-especifico" id="toc-o.-objetivo-especifico" class="nav-link" data-scroll-target="#o.-objetivo-especifico"><span class="header-section-number">2.2</span> O. OBJETIVO ESPECIFICO</a></li>
  </ul></li>
  <li><a href="#desarrollo" id="toc-desarrollo" class="nav-link" data-scroll-target="#desarrollo"><span class="header-section-number">3</span> DESARROLLO</a>
  <ul class="collapse">
  <li><a href="#qué-es-anaconda" id="toc-qué-es-anaconda" class="nav-link" data-scroll-target="#qué-es-anaconda"><span class="header-section-number">3.1</span> ¿Qué es Anaconda?</a></li>
  <li><a href="#qué-es-label-studio" id="toc-qué-es-label-studio" class="nav-link" data-scroll-target="#qué-es-label-studio"><span class="header-section-number">3.2</span> ¿Qué es Label Studio?</a></li>
  <li><a href="#modo-de-uso-de-label-studio" id="toc-modo-de-uso-de-label-studio" class="nav-link" data-scroll-target="#modo-de-uso-de-label-studio"><span class="header-section-number">3.3</span> Modo de uso de Label Studio</a></li>
  <li><a href="#materiales-y-metodos" id="toc-materiales-y-metodos" class="nav-link" data-scroll-target="#materiales-y-metodos"><span class="header-section-number">3.4</span> MATERIALES Y METODOS</a></li>
  <li><a href="#materiales-empleados-en-el-trabajo" id="toc-materiales-empleados-en-el-trabajo" class="nav-link" data-scroll-target="#materiales-empleados-en-el-trabajo"><span class="header-section-number">3.5</span> Materiales empleados en el trabajo</a></li>
  <li><a href="#procedimientos-empleados" id="toc-procedimientos-empleados" class="nav-link" data-scroll-target="#procedimientos-empleados"><span class="header-section-number">3.6</span> Procedimientos empleados</a></li>
  <li><a href="#resultados" id="toc-resultados" class="nav-link" data-scroll-target="#resultados"><span class="header-section-number">3.7</span> RESULTADOS</a></li>
  <li><a href="#conclusiones" id="toc-conclusiones" class="nav-link" data-scroll-target="#conclusiones"><span class="header-section-number">3.8</span> CONCLUSIONES</a></li>
  <li><a href="#referencias" id="toc-referencias" class="nav-link" data-scroll-target="#referencias"><span class="header-section-number">3.9</span> REFERENCIAS</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="introducción" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> INTRODUCCIÓN</h1>
<p><img src="palta.webp" class="img-fluid"></p>
<p>La palta (Persea americana) es un cultivo estratégico en numerosos sistemas agrícolas debido a su alto valor nutricional, sus propiedades funcionales y la creciente demanda global. En este contexto, la identificación temprana de alteraciones foliares derivadas de estrés biótico, abiótico o deficiencias nutricionales, esto resulta fundamental para optimizar la productividad y fortalecer las decisiones dentro de la agricultura de precisión. En los últimos años, la integración de técnicas de visión por computadora y modelos de aprendizaje automático ha permitido automatizar procesos que antes dependían exclusivamente de la inspección visual humana, aumentando así la eficiencia y la reproducibilidad del diagnóstico vegetal.</p>
<p>El desarrollo de estos modelos requiere disponer de un conjunto de imágenes adecuadamente etiquetadas. En este sentido, Label Studio se ha consolidado como una herramienta versátil y de código abierto para la anotación estructurada de datos visuales. Su capacidad para definir regiones de interés, crear máscaras, clasificar patrones y exportar anotaciones en formatos compatibles con marcos de trabajo como TensorFlow, PyTorch o Keras lo convierte en un recurso esencial dentro de los flujos modernos de análisis automatizado.</p>
<p>En el caso de las hojas de palta, la anotación precisa adquiere especial relevancia, puesto que la forma del limbo, la textura, el color, las lesiones y otros rasgos visuales influyen directamente en el desempeño de los algoritmos de clasificación y segmentación. Por ello, el uso de Label Studio no solo facilita la organización y el etiquetado meticuloso de las imágenes, sino que garantiza la trazabilidad y la estandarización necesarias para reproducir el análisis.</p>
<p>Este sitio web documenta el proceso de preparación, organización y etiquetado de un conjunto de imágenes de hojas de palta mediante Label Studio. Se describen los procedimientos técnicos empleados, la configuración de la plataforma, los criterios para definir clases y categorías, así como los pasos seguidos para exportar las anotaciones hacia modelos de aprendizaje automático. El objetivo es proporcionar una guía clara y reproducible para investigadores, estudiantes y profesionales interesados en aplicar herramientas de anotación digital dentro del contexto de la agricultura de precisión.</p>
</section>
<section id="objetivos" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> OBJETIVOS</h1>
<section id="o.-obejtivo-general" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="o.-obejtivo-general"><span class="header-section-number">2.1</span> O. OBEJTIVO GENERAL</h2>
<p>Desarrollar un sistema estructurado de etiquetado y anotación de imágenes de hojas de palta (<em>Persea americana</em>) utilizando la plataforma Label Studio, con el fin de generar un conjunto de datos confiable y adecuado para el entrenamiento y validación de modelos de aprendizaje automático orientados al análisis foliar.</p>
</section>
<section id="o.-objetivo-especifico" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="o.-objetivo-especifico"><span class="header-section-number">2.2</span> O. OBJETIVO ESPECIFICO</h2>
<ol type="1">
<li>Documentar el procedimiento de captura, organización y preprocesamiento de imágenes de hojas de palta como insumo para la construcción del dataset.</li>
<li>Configurar y adaptar la interfaz de Label Studio para la anotación de hojas de palta, definiendo clases, etiquetas y criterios visuales relevantes para el análisis automático.</li>
<li>Realizar la anotación manual de regiones de interés (ROI) en las imágenes, considerando la morfología foliar, presencia de daños, manchas, variaciones cromáticas y otros patrones visuales relevantes.</li>
<li>Exportar las anotaciones generadas en formatos compatibles con marcos de trabajo de aprendizaje profundo (p.&nbsp;ej., COCO, Pascal VOC, JSON-LS), garantizando su calidad y consistencia.</li>
<li>Evaluar la calidad del dataset anotado mediante revisión sistemática de etiquetas y verificación de la coherencia entre anotadores.</li>
<li>Preparar el conjunto de datos para su uso en modelos de visión por computadora, integrando las anotaciones en pipelines de entrenamiento y validación.</li>
</ol>
</section>
</section>
<section id="desarrollo" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> DESARROLLO</h1>
<section id="qué-es-anaconda" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="qué-es-anaconda"><span class="header-section-number">3.1</span> ¿Qué es Anaconda?</h2>
<p>Es una plataforma que facilita el uso de Python y R para realizar tareas de análisis de datos, ciencia de datos, aprendizaje automático y computación científica. Anaconda y sus herramientas asociadas son altamente relevantes en la agricultura debido a su capacidad para gestionar y analizar grandes volúmenes de datos.</p>
<p><strong>Algunos ejemplos de su aplicación en la agricultura son:</strong></p>
<ol type="1">
<li>Análisis de datos agrícolas</li>
<li>Monitoreo de cultivos</li>
<li>Agricultura de precisión</li>
<li>Modelado y predicción de clima</li>
<li>Gestión de recursos</li>
</ol>
</section>
<section id="qué-es-label-studio" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="qué-es-label-studio"><span class="header-section-number">3.2</span> ¿Qué es Label Studio?</h2>
<p><img src="laibelstudio.jpg" class="img-fluid"></p>
<p>Permite a los usuarios crear y gestionar anotaciones de datos de manera eficiente. Su propósito es proporcionar una plataforma fácil de usar para realizar tareas de etiquetado que son cruciales para entrenar modelos de IA. Las anotaciones pueden incluir tareas como clasificación, segmentación, detección de objetos, y más. Label Studio se puede instalar en un servidor local o ejecutarse en la nube. La instalación local se puede hacer usando Docker o simplemente instalando el paquete con pip: pip install label-studio y luego label-studio.</p>
<p><strong>Características principales:</strong></p>
<ul>
<li><p>Soporta múltiples tipos de datos: Imágenes, texto, audio, video y más.</p></li>
<li><p>Interfaz personalizable: Los usuarios pueden crear sus propios flujos de trabajo y definir el tipo de anotación que se requiere (por ejemplo, etiquetar objetos en una imagen, o clasificar texto).</p></li>
<li><p>Integración con modelos de aprendizaje automático: Se puede conectar con modelos preexistentes para realizar anotaciones automáticas y luego corregirlas manualmente.</p></li>
<li><p>Gestión de equipos: Permite trabajar en equipo, asignar tareas a diferentes personas y realizar un seguimiento del progreso.</p></li>
</ul>
</section>
<section id="modo-de-uso-de-label-studio" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="modo-de-uso-de-label-studio"><span class="header-section-number">3.3</span> Modo de uso de Label Studio</h2>
<ul>
<li><p><strong>Instalación:</strong> Label Studio se puede instalar en un servidor local o ejecutarse en la nube. La instalación local se puede hacer usando el paquete con pip: Copiar código : pip install label-studio.</p>
<p><img src="paso1.jpg" class="img-fluid"></p></li>
<li><p><strong>Iniciar Iniciar Label Studio desde Anaconda Prompt</strong></p></li>
</ul>
<p><img src="02.jpg" class="img-fluid"></p>
<ul>
<li><p><strong>Se crea un proyecto</strong></p>
<p>Una ves instalado Label Studio, inicio cesion utilizando el comando o codigo label studio. Esto abrirá la aplicación en un navegador web donde puedes crear un nuevo proyecto. Un proyecto en Label Studio consiste en una colección de datos que vas a etiquetar.</p></li>
<li><p><strong>Configuración del Tipo de Etiquetado</strong></p>
<p><strong>a) Clasificación de imágenes:</strong> donde se asignan etiquetas a las imágenes (por ejemplo, “perro”, “gato”).</p>
<p><strong>b) Detección de objetos:</strong> donde se dibujan cuadros alrededor de objetos dentro de una imagen.</p>
<p><strong>c) Segmentación de imágenes:</strong> donde se etiquetan áreas específicas dentro de la imagen, útil en tareas de visión por computadora.</p></li>
<li><p><strong>Subir Datos</strong></p>
<p>Los datos (imágenes, audios, textos, videos, etc.) se cargan al proyecto. Puedes subir tus archivos desde tu computadora o importarlos desde un servidor o almacenamiento en la nube.</p></li>
<li><p><strong>Etiqueta de Datos</strong></p>
<p>Una vez que los datos están cargados, puedes comenzar a etiquetar. La interfaz de usuario de Label Studio es bastante intuitiva y permite a los usuarios seleccionar y etiquetar con facilidad. Si estás etiquetando imágenes, por ejemplo, puedes dibujar cuadros o polígonos alrededor de los objetos que quieres identificar y asignarles etiquetas específicas.</p></li>
<li><p><strong>Revisión y Exportación</strong></p>
<p>Después de realizar el etiquetado, el trabajo puede ser revisado por otros miembros del equipo (si se está trabajando en grupo). Los datos anotados pueden luego ser exportados en varios formatos, como JSON o CSV, para ser utilizados en el entrenamiento de modelos de Machine Learning.<br>
</p></li>
</ul>
</section>
<section id="materiales-y-metodos" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="materiales-y-metodos"><span class="header-section-number">3.4</span> MATERIALES Y METODOS</h2>
</section>
<section id="materiales-empleados-en-el-trabajo" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="materiales-empleados-en-el-trabajo"><span class="header-section-number">3.5</span> Materiales empleados en el trabajo</h2>
<p>Hojas del cultivo de palta (Persea Americana) 1. Imágenes de hojas de palta Se utilizaron un total de 30 hojas, capturadas en condiciones controladas, incluyendo variaciones en iluminación, ángulo de toma. Las fotografías fueron obtenidas con dispositivos móviles. Este material constituyó la base del conjunto de datos destinado a la anotación.</p>
<ol start="2" type="1">
<li><p>Equipo de cómputo Se empleó un equipo portátil con sistema operativo Windows.</p></li>
<li><p>Plataforma de anotación: Label Studio Se utilizó label studio, una herramienta de código abierto para la anotación de datos visuales.</p></li>
<li><p>Entorno de desarrollo R y RStudio Para la elaboración de este sitio web y la documentación metodológica se utilizó rstudio, Además, se empleó Quarto para la generación del sitio web, facilitando la estructuración del contenido en formato reproducible.</p></li>
</ol>
</section>
<section id="procedimientos-empleados" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="procedimientos-empleados"><span class="header-section-number">3.6</span> Procedimientos empleados</h2>
<p>Como grupo se considero la toma de 5 fotografias de diferentes hojas por cada integrante del grupo, para la cual, para mantener un mejor orden se coloco las imagenes en un google drive.</p>
<p><img src="grupo4_h001.....jpg" class="img-fluid"> Ejemplo de las imagenes.</p>
<ul>
<li><strong>Link de las 30 imagenes de hojas de palta (Persea americana).</strong></li>
</ul>
<p><a href="https://drive.google.com/drive/folders/11ezcuANsCi2VOo6hzjzPEXoO6RYLLo8U" class="uri">https://drive.google.com/drive/folders/11ezcuANsCi2VOo6hzjzPEXoO6RYLLo8U</a></p>
<ul>
<li><strong>Crear un proyecto: Llamado “Anotaciones de imagenes palto”</strong></li>
</ul>
<p><img src="images/I.jpeg" class="img-fluid"></p>
<ul>
<li><strong>Subir imágenes: Imágenes de las hojas de palto</strong></li>
</ul>
<p><img src="images/II.jpeg" class="img-fluid"></p>
<ul>
<li><p><strong>Etiquetado</strong></p>
<p>Primero Seleccione la etiqueta para comenzar a dibujar alrededor de las imágenes haciendo puntos. <img src="images/III.jpeg" class="img-fluid"></p></li>
<li><p><strong>El etiquetado se revisa y ajusta según sea necesario</strong></p></li>
</ul>
<p><img src="images/IV.jpeg" class="img-fluid"></p>
</section>
<section id="resultados" class="level2" data-number="3.7">
<h2 data-number="3.7" class="anchored" data-anchor-id="resultados"><span class="header-section-number">3.7</span> RESULTADOS</h2>
<p><a href="https://drive.google.com/drive/u/0/folders/12gu83o8PPPS1Uvj53K9Cc5vKET5xwczR" class="uri">https://drive.google.com/drive/u/0/folders/12gu83o8PPPS1Uvj53K9Cc5vKET5xwczR</a></p>
<p>En este link se encontrara todas las imagenes que se emplearon para el presente trabajo, utilizando label studio.</p>
</section>
<section id="conclusiones" class="level2" data-number="3.8">
<h2 data-number="3.8" class="anchored" data-anchor-id="conclusiones"><span class="header-section-number">3.8</span> CONCLUSIONES</h2>
<p>El uso de herramientas digitales como Anaconda y Label Studio constituye un apoyo fundamental para el análisis avanzado de imágenes foliares de palta (Persea americana). Anaconda permite gestionar entornos de trabajo con Python y R de manera integrada, facilitando el procesamiento de grandes volúmenes de datos y la construcción de modelos predictivos orientados al diagnóstico vegetal. Por su parte, Label Studio optimiza el proceso de etiquetado de imágenes de hojas, permitiendo identificar patrones asociados a estrés hídrico, deficiencias nutricionales o la presencia de patógenos con un alto grado de precisión. La combinación de estas tecnologías fortalece la toma de decisiones en sistemas de producción de palta, impulsa el desarrollo de modelos de inteligencia artificial aplicados a la agricultura y contribuye a la innovación y sostenibilidad del sector.</p>
</section>
<section id="referencias" class="level2" data-number="3.9">
<h2 data-number="3.9" class="anchored" data-anchor-id="referencias"><span class="header-section-number">3.9</span> REFERENCIAS</h2>
<p>Anaconda. (s. f.). https://www.anaconda.com/download</p>
<p>Open Source Data Labeling. (s. f.).https://labelstud.io/</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




<script src="index_files/libs/quarto-html/zenscroll-min.js"></script>
</body></html>